# BenchmarkSQL

BenchmarkSQL is a [GPLv2](docs/LICENSE.txt) fair-use TPC-C like testing
tool.

## Start

1. Open `docs/how-to-run-postgres.txt` to check how to create the database and user.  

2. Check if Maven is installed by running: ```mvn --version```
If the command returns nothing, install Maven.
On macOS, you can do this with: ```brew install maven```

3. Next, open `BUILDING.md` and follow the build instructions.

4. Then open `HOW-TO-RUN.md` and follow the section on creating the benchmark configuration file. And go on. Youâ€™ll need to go to the target directory generated during the build process and create a `my.properties` file. Start by copying the sample file: `sample.postgresql.properties`. Edit the file and update any necessary values (for example, the database password). 

    Tip: For your first run, simplify or reduce the configuration settings in your properties file to make the process faster.

## Report Generation

Follow the steps below to set up the environment and generate the HTML report.

1. Create and Activate a Virtual Environment, with: 
    ```bash 
    python3 -m venv env
    source env/bin/activate
    ```

2. Install R
    ```bash
    brew install r
    R --version # to check
    ```

3. Install the required Python packages:
    ```bash
    pip install numpy matplotlib jinja2
    ```

4. Run the following command, replacing "RESULT_DIR" with the path to the directory generated by your run:
    ```bash
    python3 generateReport.py --result_dir="RESULT_DIR" 
    ```

5. After running the script, an HTML file containing the report will be generated.

## Overview

BenchmarkSQL is implemented in Java, using JDBC to stress test SQL databases.
The overall architecture is a series of data structures, queues and thread
groups that handle the simulated terminals, users and application threads. 

Its architecture allows BenchmarkSQL to drive TPC-C configurations up to many
thousands of warehouses (known as the scaling factor) without overwhelming the
job scheduler of the test driver itself.
Yet it is capable of doing so without sacrificing one of the most important
measurements in a TPC-C, the end-user experienced response time at the terminal.

![TimedDriver](docs/TimedDriver-1.svg)

Please read the [Full Architecture Description](docs/TimedDriver.md)
for a detailed explanation of the above diagram.


